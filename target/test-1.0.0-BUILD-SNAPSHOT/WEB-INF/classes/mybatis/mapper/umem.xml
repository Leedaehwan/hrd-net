<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="umem">

<insert id="joing" parameterType="api.u_member.vo.UmemVO">
	INSERT INTO u_member (id,pw,name<if test="birth != null">,birth</if><if test="email != null">,email</if><if test="phone != null">,phone</if><if test="addr != null">,addr</if>,member)
	VALUES (#{id},#{pw},#{name}<if test="birth != null">,#{birth}</if><if test="email != null">,#{email}</if><if test="phone != null">,#{phone}</if><if test="addr != null">,#{addr}</if>,#{member})
</insert>

<!-- 유저가 회원가입이 되 있는지 안 됬는지 확인 하는 문장 -->
<select id="searchUser" parameterType="String" resultType="String">
	SELECT * FROM u_member
	WHERE id = #{no}
</select>

<select id="searchEmail" parameterType="String" resultType="String">
	SELECT * FROM u_member
	WHERE email = #{no} AND member = 'user'
</select>

<!-- 로그인 기능!!! -->
<select id="login" parameterType="Map" resultType="api.u_member.vo.UmemVO">
	SELECT * FROM u_member
	WHERE id = #{id} AND pw = #{pw}
</select>

<!-- 사용자 아이디 찾아주기 기능 -->
<select id="findID" parameterType="String" resultType="String">
	SELECT id FROM u_member
	WHERE email = #{no} AND member = 'user'
</select>

<!-- 사용자 비밀번호 재 발급시 업데이트 기능 -->
<update id="pwUpdate" parameterType="Map"> 
	UPDATE u_member
	SET pw = #{pw}
	WHERE id = #{id}
</update>

</mapper>